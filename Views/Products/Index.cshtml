@model List<ProductViewModel>

<div class="product-list">
    @foreach (var product in Model)
    {
        <div class="product-item">
            <!-- Ensure correct Razor syntax for src -->
            <img src="@(!string.IsNullOrEmpty(product.Photopath) ? product.Photopath : "/images/default.jpg")" alt="@product.ProductName" class="product-image" />
            
            <div class="product-details">
                <h3>@product.ProductName</h3>
                <p>Price: @product.ProductPrice.ToString("C")</p>
                <div class="quantity-control">
                    <button class="btn btn-danger" onclick="removeFromCart(@product.ProductId)">
                        -
                    </button>
                    <span>@product.QuantityInCart</span>
                    <button class="btn btn-success" onclick="addToCart(@product.ProductId)">
                        +
                    </button>
                </div>
            </div>
        </div>
    }
</div>

function addToCart(productId) {
    $.ajax({
        url: '/Product/AddToCart',
        type: 'POST',
        data: { productId: productId, quantity: 1 },
        success: function (response) {
            // Handle the response (for example, logging it)
            console.log(response); // Log the response to the console (or use it in the UI)

            // Optionally, reload the page
            location.reload();
        }
    });
}

function removeFromCart(productId) {
    $.ajax({
        url: '/Product/RemoveFromCart',
        type: 'POST',
        data: { productId: productId, quantity: 1 },
        success: function (response) {
            // Handle the response (for example, logging it)
            console.log(response); // Log the response to the console (or use it in the UI)

            // Optionally, reload the page
            location.reload();
        }
    });
}